{% set custom_class = "lg:h-[58.5rem]" %}

<section class="{{ block.slug ?? 'three-col-carousel' }} {{ custom_class }}">
    {% if fields.anchor|length > 0 or custom_id %}
        <div class="section-anchor" id="{{ custom_id ?? fields.anchor }}"></div>
    {% endif %}

    {% set pt = fields.padding_top and fields.padding_top != "unset" ? fields.padding_top : "st-xxl" %}
    {% set pb = fields.padding_top and fields.padding_bottom != "unset" ? fields.padding_bottom : "sb-xxl" %}
           
    <div class="bg-[#C0D5EA] bg-opacity-80 z-0 absolute top-0 left-0 w-full h-full"></div>
    <img class="object-cover bg-opacity-80 z-10 absolute top-0 left-0 w-full h-full" src="{{ function('png','carousel-bg') }}" />
    
    <div class="container h-full relative z-50 xl:px-[10rem]">
        <div class="{{ pt }} {{ pb }} h-full">                      
            {% if fields.carousel %}
                <div class="slider h-full">
                    {% for carousel_item in fields.carousel %}
                        <div class="static slide__date">                        
                            {% if fields.carousel_title %}
                                <h2 class="absolute z-50 max-w-[30%] max-lg:hidden">{{ fields.carousel_title }}</h2>
                            {% endif %}
                        </div>
                        <div class="slide">
                            <div class="slide__top">
                                {% if carousel_item.col_1 %}
                                    <span class="slide__date">                        
                                        {% if fields.carousel_title %}
                                            <h2 class="invisible max-lg:visible">{{ fields.carousel_title }}</h2>
                                        {% endif %}
                                        {% if carousel_item.col_1.image %}
                                            <div class="lg:h-[24rem] w-full max-w-[17rem] rounded-bl-[7rem] overflow-hidden">
                                                <img class="object-cover w-full h-full" src="{{ carousel_item.col_1.image }}" alt="col-1-image" />
                                            </div>
                                        {% endif %}
                                    </span>
                                {% endif %}
                            </div>
                            <div class="slide__img">
                                {% if carousel_item.col_2 and carousel_item.col_2.image %}
                                    <div class="lg:h-[37.90625rem] w-auto rounded-tl-[7rem] rounded-tr-[7rem] overflow-hidden">
                                        <img class="object-cover w-full h-full" src="{{ carousel_item.col_2.image }}" alt="col-2-image" />
                                    </div>
                                {% endif %}
                            </div>
                            <div class="slide__bottom">                        
                                {% if carousel_item.col_3 %}
                                    <span class="slide__title">
                                        {% if carousel_item.col_3.image %}
                                            <div class="lg:h-[24rem] w-full max-w-[17rem] rounded-br-[7rem] overflow-hidden">
                                                <img class="object-cover w-full h-full" src="{{ carousel_item.col_3.image }}" alt="col-3-image">
                                            </div>
                                        {% endif %}
                                        <div class="flex flex-col gap-[1rem] items-start">
                                            {% if carousel_item.col_3.description %}
                                                <p class="lg:text-[1.35rem] lg:leading-[110%] max-w-[16.75rem]">{{ carousel_item.col_3.description }}</p>
                                            {% endif %}
                                            {% if carousel_item.col_3.link.url|length > 0 %}
                                                {% set custom_class = 'btn-primary' %}							
                                            
                                                {% include 'components/cta.twig' with {
                                                'class' : custom_class,
                                                'cta': carousel_item.col_3.link, 
                                                'icon': true,
                                                'is_btn': true
                                                } %}
                                            {% endif %}
                                        </div>
                                    </span>
                                {% endif %}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
            {% if fields.carousel %}
                {% set ctr = 0 %}
                <div class="flex items-center justify-center">
                    <div class="slider-dots flex gap-[0.25rem] items-center justify-center w-auto bg-white/30 rounded-[1.875rem] p-[0.25rem]">
                        {% for carousel_item in fields.carousel %}
                            <button class="slider-dot {% if ctr == 0 %} active {% endif %}" data-ctr="{{ ctr }}">
                                <svg class="active" width="45" height="14" viewBox="0 0 45 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M0 7C0 3.13401 3.13401 0 7 0H38C41.866 0 45 3.13401 45 7C45 10.866 41.866 14 38 14H7C3.13401 14 0 10.866 0 7Z" fill="white"/>
                                </svg>

                                <svg class="inactive" width="23" height="22" viewBox="0 0 23 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <g opacity="0.4" filter="url(#filter0_d_3561_778)">
                                    <rect x="4" y="4" width="15" height="14" rx="7" fill="white"/>
                                    </g>
                                    <defs>
                                    <filter id="filter0_d_3561_778" x="0" y="0" width="23" height="22" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                                    <feOffset/>
                                    <feGaussianBlur stdDeviation="2"/>
                                    <feComposite in2="hardAlpha" operator="out"/>
                                    <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_3561_778"/>
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_3561_778" result="shape"/>
                                    </filter>
                                    </defs>
                                </svg>
                            </button>
                            {% set ctr = ctr + 1 %}
                        {% endfor %}
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
    
</section>